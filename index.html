<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,user-scalable=no">
	<title> </title>
	<script src="js/TweenMax.min.js"></script>
	<script src="js/winwheel.min.js"></script>  

</head>
<body>
	<table border="0" cellpadding="20" cellspacing="0">
		<tr>
			<td></td>
			<td></td>
			<td>
				<img src="img/gm.png"  width="100px" height="100px">
			</td>
			<td></td>	
			<td>
				<img src="img/tittle.png"  width="850px" height="80px">
			</td>
			<td></td>
		</tr>	
	</table>
	
	<table border="0" cellpadding="40" cellspacing="0">
		
		<tr>	
			<td><h1><input type="button" value= "        Girar        " onclick="miRuleta.startAnimation();"></h1> <br><img src="img/gms.png"  width="350px" height="250px"></td>
			<td>
				<canvas id="canvas" height="400" width="400"></canvas> </td>
			<td>
				<img src="img/trip.jpg"  width="390px" height="80px">
				<br><br><br><br><br><img src="img/logo.png"  width="380px" height="80px">
			</td>
			
		</tr>	
	</table>
	<script>
		
		var miRuleta = new Winwheel ({
			'numSegments': 0,
			'outerRadius': 170,
			

			'segments':[
			
		

			],
			'animation':{
				'type': 'spinToStop',
				'duration': 5,
				'callbackFinished': 'Mensaje()',
				'callbackAfter': 'dibujarIndicador()'
			}

		
		});

				 function addSegment()
    {
        // Use a date object to set the text of each added segment to the current minutes:seconds
        // (just to give each new segment a different label).
        let date = new Date();
 
        // The Second parameter in the call to addSegment specifies the position,
        // in this case 1 meaning the new segment goes at the start of the wheel.
        miRuleta.addSegment({
            'text' : date.getMinutes() + ':' + date.getSeconds(),
            'fillStyle' : 'red'
        }, 1);
 
        // The draw method of the wheel object must be called in order for the changes
        // to be rendered.
        miRuleta.draw();
    }

    function deleteSegment()
    {
        // Call function to remove a segment from the wheel, by default the last one will be
        // removed; you can pass in the number of the segment to delete if desired.
        miRuleta.deleteSegment();
 
        // The draw method of the wheel object must be called to render the changes.
        miRuleta.draw();
    }



		function Mensaje() {
           var SegmentoSeleccionado = miRuleta.getIndicatedSegment();
           alert("El afortunado ganador es: " + SegmentoSeleccionado.text + "!");
           //Reinicio de la ruletaa (valor inicial)
           miRuleta.stopAnimation(false);
           miRuleta.rotationAngle = 0;
           miRuleta.draw();
           dibujarIndicador();
       }

		dibujarIndicador();
		 function dibujarIndicador() {
            var ctx = miRuleta.ctx;
            ctx.strokeStyle = 'navy';     
            ctx.fillStyle = 'black';     
            ctx.lineWidth = 2;
            ctx.beginPath();             
            ctx.moveTo(170, 0);          
            ctx.lineTo(230, 0);          
            ctx.lineTo(200, 40);
            ctx.lineTo(171, 0);
            ctx.stroke();                
            ctx.fill();                  
       }



	</script>

	<input type="text" name="nombre">
	<button onClick="addSegment();">Add Segment</button>
	<button onClick="deleteSegment();">Delete Segment</button>
</body>
</html>